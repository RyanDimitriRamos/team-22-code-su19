<!DOCTYPE html>
<html>
   <head>
    <meta charset="UTF-8">
    
    <title> Chart </title>
    <link rel="stylesheet" href="/css/main.css">
    
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
        google.charts.load('current', {packages: ['corechart']});
        google.charts.setOnLoadCallback(drawChart);
        function drawChart(){
          	//retrieve data from server
        	fetch("/ChartServlet")
              .then((response) => {
                return response.json();
              })
              .then((restaurantJson) => {
                var restaurantData = new google.visualization.DataTable();
                //define columns for the DataTable instance
                restaurantData.addColumn('string', 'Restaurant');
                restaurantData.addColumn('number', 'Number of Guests');

                for (i = 0; i < restaurantJson.length; i++) {
                  restaurantRow = [];
                  var name = restaurantJson[i].name;
                  var numGuests = restaurantJson[i].numGuests;
                  restaurantRow.push(name, numGuests);

                  restaurantData.addRow(restaurantRow);
               }
              //optimizations 
                var chartOptions = {
                		title: "Top Restuarants in San Francisco this Week",
                    colors : ["#b6d8a2"],
                		width: 1000,
                        height: 700,
                        animation : {
                        	startup: true,
                        	duration: 2000,
                        	easing: "inAndOut"
                        }
          		};
               var restaurantChart = new google.visualization.BarChart(document.getElementById('restaurantChart'));
               restaurantChart.draw(restaurantData, chartOptions);
           })
        }
    </script>
  </head> 
  <body>
    <nav>
      <ul id="navigation">
        <li><a href="/">Home</a></li>
        <li><a href="/aboutus.html">About Our Team</a></li>
        <li><a href="/user-page.html">Send a Message</a></li>
        <li><a href="/feed.html">My Messages</a></li>
        <li><a href="/community.html">User Community</a></li>
        <li><a href="/stats.html">Site Statistics</a></li>
        <li><a href="/maps.html">Maps</a></li>
        <li><a href="/chart.html">Charts</a></li>
        <li><a href="/image.jsp">Image Labeling</a></li>
      </ul>
    </nav>
    <div id="restaurantChart"></div>
  </body>
</html>